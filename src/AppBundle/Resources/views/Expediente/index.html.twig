{% extends "AppBundle::layout.html.twig" %}

{% block content %}  
    <style>
        input[type=text]{
            margin-bottom: 10px;
            padding:10px;            
        }
        input[type=submit]{
            margin-bottom: 10px;           
        }
        .panel{
            font-size: 11px;        
        }
        .form-exp{
            font-size:15px;
            padding:10px;
        }
        .title{
            font-size:16px;
        }
    </style>

    <div class="col-xs-9 col-md-offset-1">
        <div class="panel panel-primary ">
            <div class="title panel-heading">Carga de datos -> Expediente</div>
            <div class="panel panel-body">
                <br/>
                {{form_start(form,{'action':'','method':'POST'})}}        
                <div class="col-lg-14">

                    <div class="col-lg-6">
                        <label class="exp text-default">NRO. DE EXPEDIENTE</label>
                        {{ form_errors(form.nroExpediente) }}
                        {{ form_widget(form.nroExpediente) }}
                    </div>
                    <div class="col-lg-3 ">
                        <label class="text-default">CODIGO TEMA</label>
                        {{ form_errors(form.tema) }}
                        {{ form_widget(form.tema) }}
                    </div>
                    <div class="col-lg-2">
                        <label class="text-default">NRO. FOJAS</label>
                        {{ form_errors(form.fojas) }}
                        {{ form_widget(form.fojas) }}
                    </div>                   
                    <div class="col-lg-6">
                        <label class="text-default">DEPENDENCIA</label>
                        {{ form_errors(form.iniciadorDependencia) }}
                        {{ form_widget(form.iniciadorDependencia) }}
                    </div>                                           
                    <div class="col-lg-2">
                        <label class="text-default">FECHA DE INICIO</label>
                        {{ form_row(form.fechaInicio, { 'id': 'date1' })}} 
                        {{ form_errors(form.fechaInicio) }}
                        {{ form_widget(form.fechaInicio) }}
                    </div>  
                    <div class="col-lg-2">
                        <label class="text-default">FECHA DE FIN.</label>
                        {{ form_row(form.fechaFin, { 'id': 'date2' })}} 
                        {{ form_errors(form.fechaFin) }}
                        {{ form_widget(form.fechaFin) }}
                    </div>                      
                </div>
                <hr/>
                {#<div class="col-lg-3">
                    <label class="text-default">UBICACION ACTUAL</label>
                    {{ form_row(form.ubicacionActual)}} 
                    {{ form_errors(form.ubicacionActual) }}
                    {{ form_widget(form.ubicacionActual) }}
                </div>  

                <div id="contenido" hidden>

                </div>

                <div id="mesaentrada" class="col-xs-14" hidden>
                    <div class="codigo col-lg-6">
                        <label class="text-default">CODIGO DE EXPEDIENTE</label>                    
                    </div>                 
                </div>

                <div id="lugarfisico" class="col-xs-14" hidden>
                    <div class="tipo col-lg-3">
                        <label class="text-default">TIPO</label>                    
                    </div>                        
                     <div class="acceso col-lg-3">
                        <label class="text-default">ACCESO</label>                    
                    </div>  
                    <div class="descripcion col-lg-12">
                        <label class="text-default">DESCRIPCION</label>                    
                    </div>    
                </div>

                <div id="persona" class="col-xs-14" hidden>
                    <div class="nombre col-lg-3">
                        <label class="text-default">NOMBRE/S</label>                    
                    </div>
                    <div class="apellido col-lg-2">
                        <label class="text-default">APELLIDO</label>                    
                    </div>
                    <div class="dni col-lg-2">
                        <label class="text-default">DNI</label>                    
                    </div>
                    <div class="cargo col-lg-2">
                        <label class="text-default">CARGO</label>                    
                    </div>
                </div>#}
                <div class="col-lg-12 ">
                    <label class="text-default">TIPO</label>
                    {{ form_errors(form.tipo) }}
                    {{ form_widget(form.tipo) }}
                </div>
                <div class="col-lg-12">
                    <label class="text-default">CONCEPTO</label>
                    {{ form_errors(form.concepto) }}
                    {{ form_widget(form.concepto) }}
                    <hr/>
                </div>
                <div class="col-lg-3 float left">
                    {{ form_widget(form.Guardar) }}
                </div>
                {{form_end(form)}}
            </div>
        </div>
    </div>           
    <script>
        var $ubicacion = $('#expediente_ubicacionActual');     
        var $form = $ubicacion.closest('form');

        $ubicacion.on('change', function () {
            var data = $ubicacion.serialize();
            var index = $ubicacion.val();
            $.ajax({
                url :"{{ path('add_evento') }}",
                type: "POST",
                data: data,
                success : function(html) {
                    // la variable html representa toda la pÃ¡gina junto con el select de estados.
                    // el cual tomamos y colocamos para reemplazar el select actual.
                   
                   
                   if(index == 0 ){
                        $('#persona').hide();
                        $('#mesaentrada').hide();
                        $('#lugarfisico').hide();
                   }
                   if(index == 1){
                        $('#persona').hide();
                        $('#lugarfisico').hide();
                        $('#mesaentrada').show();
                        
                        
                        if($('.codigo > input').size() <=0){
                               $('#contenido').html($(html).find('#expediente_mesaentrada'));
                               $('#expediente_mesaentrada_codigoExpediente').appendTo(".codigo");
                        }
                     
                   }
                   if(index == 2){
                            $('#mesaentrada').hide();
                            $('#lugarfisico').hide();
                            $('#persona').show();
                            
                             if($('.nombre > input').size() <= 0){
                               $('#contenido').html($(html).find('#expediente_persona'));
                               $('#expediente_persona_nombre').appendTo(".nombre");
                               $('#expediente_persona_apellido').appendTo(".apellido");
                               $('#expediente_persona_dni').appendTo(".dni");
                               $('#expediente_persona_cargo').appendTo(".cargo");
                            }
                           
                   }     
                   if(index == 3){
                              $('#mesaentrada').hide();         
                              $('#persona').hide();
                              $('#lugarfisico').show();
                             if($('.tipo > input').size() <= 0){
                               $('#contenido').html($(html).find('#expediente_lugarfisico'));
                               $('#expediente_lugarfisico_tipo').appendTo(".tipo");
                               $('#expediente_lugarfisico_descripcion').appendTo(".descripcion");
                               $('#expediente_lugarfisico_acceso').appendTo(".acceso");
                            }
                   }
                }
            });
        });
    </script>

{% endblock %}